IHTSDO Snomed Publication Tools
===============================

Test
----

Sanity test for the canonical algorithm results. Reads in 3 ontologies:
- The original, unmodified long form format used as inputs for the canonical algorithm ("original")
- The generated short form output from the canonical algorithm ("generated")
- The output from the legacy PL/SQL version of the canonical algorithm ("expected")

This sanity tests then compares the "expected" triple set against the "generated" triple set, and tries to identify any discrepancies between these. Ideally, the two outputs should be identical. 

During our testing, we noticed several problems with the "expected" format, and therefore the legacy PL/SQL algorithm:
- There are several isA statements in the isA output that could not possibly be, and this error exists **only** in the most recent release of the PL/SQL algorithm
- There are some 14,000 unshared defining characteristic statements in the "expected' output that are erroneous, and this error seems to go back at least 2 releases of the PL/SQL algorithm

In order to verify that the "expected" output is incorrect, we also need to read in the "original" ontology, to confirm that the erronoues "expected" statements are in fact errors.

Sample execution:
    java -Xmx8000m -jar target/test.jar -g generated.txt -e expected.txt -c concepts.txt -x extras.txt -m missing.txt -o original.txt 

Input format:

     -h, --help       Print this help menu
     -g. --generated  File containing all statements generated by algorithm
     -e, --expected   File containing all statements expected by algorithm
     -c, --concepts   File containing all the concepts referenced in the relationships file, aka 'Concepts_Core'
     -d, --database		Optional. Specify location of database file. If not specified, 
                      defaults to an in-memory database (minium 2Gb of heap space required)
     -x, --extra      Specify output file to write all the statements in generated, but not in expected
     -m, --missing    Specify output file to write all the statements in expected, but not in generated
     -o, --original   File containing the original long form relatioship statements, used to generate the canonical form

Here is a sample of the output from running this sanity test:


